@using ECMills.Models;
@model dynamic

@{
    ViewBag.Title = "Arrangement";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="row col-md-12">
    <div class="card col-md-5">
        <div class="card-body">
            Listed Contacts
            <hr />
            <table class="table-responsive table-hover">
                @{
                    Int32 DeceasedContactID = 0;
                    Dictionary<string, dynamic> ContactDictionaryArray = new Dictionary<string, dynamic>();
                }
                @foreach (sp_GetDeceasedContactsList_Result DeceasedContactList in Model.DeceasedContactList)
                {
                    DeceasedContactID = DeceasedContactID + 1;

                    // Add address details into the dictionary array called "AddressDictionaryArray"
                    ContactDictionaryArray.Add(String.Format("Name_{0}"                 , DeceasedContactID.ToString()), DeceasedContactList.Name);
                    ContactDictionaryArray.Add(String.Format("ContactType_{0}"          , DeceasedContactID.ToString()), DeceasedContactList.ContactType);
                    ContactDictionaryArray.Add(String.Format("AddressLine1_{0}"         , DeceasedContactID.ToString()), DeceasedContactList.AddressLine1);
                    ContactDictionaryArray.Add(String.Format("AddressLine2_{0}"         , DeceasedContactID.ToString()), DeceasedContactList.AddressLine2);
                    ContactDictionaryArray.Add(String.Format("City_{0}"                 , DeceasedContactID.ToString()), DeceasedContactList.City);
                    ContactDictionaryArray.Add(String.Format("Postcode_{0}"             , DeceasedContactID.ToString()), DeceasedContactList.PostCode);
                    ContactDictionaryArray.Add(String.Format("DOB_{0}"                  , DeceasedContactID.ToString()), DeceasedContactList.DateOfBirth);
                    ContactDictionaryArray.Add(String.Format("Occupation_{0}"           , DeceasedContactID.ToString()), DeceasedContactList.Occupation);
                    ContactDictionaryArray.Add(String.Format("PointOfContactType_{0}"   , DeceasedContactID.ToString()), DeceasedContactList.PointOfContactType);
                    ContactDictionaryArray.Add(String.Format("PointOfContactValue_{0}"  , DeceasedContactID.ToString()), DeceasedContactList.PointOfContactValue);
                    ContactDictionaryArray.Add(String.Format("Relationship_{0}"         , DeceasedContactID.ToString()), DeceasedContactList.Relationship);
                    ContactDictionaryArray.Add(String.Format("Notes_{0}"                , DeceasedContactID.ToString()), DeceasedContactList.Notes);
                    ContactDictionaryArray.Add(String.Format("ConsentToBeContacted_{0}" , DeceasedContactID.ToString()), DeceasedContactList.ConsentToBeContacted);
                    ContactDictionaryArray.Add(String.Format("AccountModerator_{0}"     , DeceasedContactID.ToString()), DeceasedContactList.AccountModerator);
                    <tr>
                        <td>
                            <button id="@DeceasedContactID" type="button" onclick="GetDeceasedContactDetails(@DeceasedContactID)" class="ContactsButton btn btn-outline-primary text-left col-md-12">
                                <table class="col-md-5">
                                    <tr class="col-md-12">
                                        <th align="left">@DeceasedContactList.ContactType</th>
                                        <th align="right">@DeceasedContactList.Relationship</th>
                                    </tr>
                                    <tr>
                                        <td align="left">@DeceasedContactList.Name</td>
                                        <td align="right">@DeceasedContactList.PointOfContactValue</td>
                                    </tr>
                                </table>
                            </button>
                        </td>
                    </tr>
                }
            </table>
        </div>
    </div>

    <div class="col-md-1">

    </div>

    <div class="card table-responsive col-md-5">
        <div class="card-body">
            Contact Details
            <hr />
            <div id="testerdiv">
                <div class="row">
                    <div class="col-md-4">
                        <div class="form-group bmd-form-group">
                            <label class="bmd-label-static">
                                Contact Type
                            </label>
                            <div id="ContactType" class="form-control">

                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group bmd-form-group">
                            <label class="bmd-label-static">
                                Relationship
                            </label>
                            <div id="Relationship" class="form-control">

                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group bmd-form-group">
                            <label class="bmd-label-static">
                                Name
                            </label>
                            <div id="Name" class="form-control">

                            </div>
                        </div>
                    </div>
                </div>
                <br />
                <div class="row">
                    <div class="col-md-4">
                        <div class="form-group bmd-form-group">
                            <label class="bmd-label-static">
                                Date of Birth
                            </label>
                            <div id="DOB" class="form-control">

                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group bmd-form-group">
                            <label class="bmd-label-static">
                                Occupation
                            </label>
                            <div id="Occupation" class="form-control">

                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group bmd-form-group">
                            <label class="bmd-label-static">
                                Accounts Moderator
                            </label>
                            <div id="AccountsModerator" class="form-control">

                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group bmd-form-group">
                            <label class="bmd-label-static">
                                Address
                            </label>
                            <div id="Address" class="form-control">

                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group bmd-form-group">
                            <label class="bmd-label-static">
                                Notes
                            </label>
                            <div id="Notes" class="form-control">

                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group bmd-form-group">
                            <label class="bmd-label-static">
                                Client Has Consented To Be Contacted
                            </label>
                            <div id="ConsentToBeContacted" class="form-control">

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
@section scripts {
    <script type="text/javascript">
        function GetDeceasedContactDetails(DeceasedContactID)
        {   // Clear the current address detail values from the page to get ready for the new values
            $('#ContactType'         ).empty();
            $("#Relationship"        ).empty();     
            $("#Name"                ).empty();        
            $("#DOB"                 ).empty();        
            $("#Occupation"          ).empty();       
            $('#AccountsModerator'   ).empty();   
            $('#Address'             ).empty();    
            $('#Notes'               ).empty();     
            $('#ConsentToBeContacted').empty();

            // Add the correct address detail for the selected address
            if (DeceasedContactID == 1)
            {
                $('#ContactType'            ).append("@ContactDictionaryArray["ContactType_1"]");
                $("#Relationship"           ).append("@ContactDictionaryArray["Relationship_1"]");
                $("#Name"                   ).append("@ContactDictionaryArray["Name_1"]");
                $("#DOB"                    ).append("@ContactDictionaryArray["DOB_1"]");
                $("#Occupation"             ).append("@ContactDictionaryArray["Occupation_1"]");
                $('#AccountsModerator'      ).append("@ContactDictionaryArray["AccountModerator_1"]");
                $('#Address'                ).append("@ContactDictionaryArray["AddressLine1_1"]");
                $('#Notes'                  ).append("@ContactDictionaryArray["Notes_1"]");
                $('#ConsentToBeContacted'   ).append("@ContactDictionaryArray["ConsentToBeContacted_1"]");
            }
            else if (DeceasedContactID == 2)
            {
                $('#ContactType'            ).append("@ContactDictionaryArray["ContactType_2"]");
                $("#Relationship"           ).append("@ContactDictionaryArray["Relationship_2"]");
                $("#Name"                   ).append("@ContactDictionaryArray["Name_2"]");
                $("#DOB"                    ).append("@ContactDictionaryArray["DOB_2"]");
                $("#Occupation"             ).append("@ContactDictionaryArray["Occupation_2"]");
                $('#AccountsModerator'      ).append("@ContactDictionaryArray["AccountModerator_2"]");
                $('#Address'                ).append("@ContactDictionaryArray["AddressLine1_2"]");
                $('#Notes'                  ).append("@ContactDictionaryArray["Notes_2"]");
                $('#ConsentToBeContacted'   ).append("@ContactDictionaryArray["ConsentToBeContacted_2"]");
            } 
        };
    </script>
}